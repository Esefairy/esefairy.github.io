<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>drag拖拽</title>
    <style>
        .box {
            float: left;
            margin: 3px;
            padding: 3px;
        }

        img {
            width: 270px;
            height: 100px;
        }

        #puzzle {
            font-size: 0;
            margin: 30px auto;
            padding: 5px;
            width: 600px;
        }
    </style>
</head>

<body>
    <p style="font-size: 50px;text-align: center;color: gainsboro">拼图游戏！！！</p>
    <div id="puzzle">
        <div class="box"><img alt="1"></div>
        <div class="box"><img alt="2"></div>
        <div class="box"><img alt="3"></div>
        <div class="box"><img alt="4"></div>
        <div class="box"><img alt="5"></div>
        <div class="box"><img alt="6"></div>
    </div>
    <script>
        var image = document.getElementsByTagName("img");
        var box = document.getElementsByClassName("box");
        image.draggable = true;
        var source = "";
        var nowImage;
        var nowImageBox;
        var thenImage;
        for (let i = 0; i < image.length; i++) {

            
            source = "p" + i + ".jpg";
            image[i].setAttribute("src", source);
            image[i].onmousedown = function () {
                nowImage = this;
                nowImageBox = this.parentNode;
            }
            box[i].ondragover = function (event) {
                event.preventDefault();
            }
            box[i].ondrop = function (event) {
                thenImage = box[i].childNodes[0];
                box[i].appendChild(nowImage);
                nowImageBox.appendChild(thenImage);
                var img = document.getElementsByTagName("img");
                if (isSuccessful(img)) {
                    alert("成功完成!");
                }
            }
        }
        function isSuccessful(img) {
            for (var i = 0; i < img.length; i++) {
                var str = img[i].src;
                str = str.substring(str.length - 6);
                if (str != ("p" + i + ".jpg")) {
                    return false;
                }
            }
            return true;
        }

    </script>
</body>

</html>